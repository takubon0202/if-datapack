# Minecraft Datapack Builder

Minecraft Java Edition 1.13～1.21.11 対応の**ノーコード データパックビルダー**です。
ブラウザ上で動作し、ウィザード形式でミニゲームやゲームシステムを自動生成できます。

**デモ:** https://takubon0202.github.io/if-datapack/

---

## 特徴

- **ノーコード対応** — ボタンを選ぶだけでミニゲームやゲームシステムのデータパックを生成
- **VS Code 風エディタ** — シンタックスハイライト・オートコンプリート・エラー検出付き
- **ビジュアルエディタ** — レシピ・ルートテーブル・進捗をGUIで直感的に編集
- **AI アシスタント** — Gemini / Claude / GPT によるコード生成・エージェント実行
- **コマンドシミュレーター** — サーバー不要でデータパックの動作を仮テスト
- **14ページの初心者ガイド** — データパックの導入から活用まで完全サポート
- **ZIPダウンロード** — 完成したデータパックをそのままサーバーに入れて使える

---

## 目次

1. [使い方](#使い方)
2. [機能一覧](#機能一覧)
3. [対応バージョン](#対応バージョン)
4. [ミニゲーム・システム一覧](#ミニゲームシステム一覧)
5. [エディタ](#エディタ)
6. [AI機能](#ai機能)
7. [ガイド](#ガイド)
8. [開発者向け](#開発者向け)
9. [技術スタック](#技術スタック)
10. [ライセンス](#ライセンス)

---

## 使い方

### STEP 1: プロジェクト作成

1. サイトにアクセスすると **セットアップウィザード** が表示されます
2. **プロジェクト名**（例: `my-minigame`）を入力
3. **名前空間**（namespace）を入力（例: `mygame`）
4. **対象バージョン** を選択（1.13～1.21.11）
5. **初期テンプレート** を選択（load関数、tick関数、レシピ等）
6. 「作成」をクリック

### STEP 2: ミニゲーム / システムを作成

ツールバーの「ミニゲーム」または「システム」ボタンから、ウィザード形式で自動生成できます。

1. 作りたいゲームタイプを選択
2. ゲーム名・チーム数・制限時間などを設定
3. 「生成」をクリックすると、必要なファイルが全て自動作成されます

### STEP 3: エディタで編集

左のファイルツリーからファイルを選択すると、自動的にエディタが開きます。

- `.mcfunction` ファイル → **統合エディタ**（コード + サイドバー）
- レシピ JSON → **レシピビジュアルエディタ**（3x3グリッド）
- ルートテーブル JSON → **ルートテーブルエディタ**（確率バー）
- 進捗 JSON → **進捗エディタ**（フォーム入力）

### STEP 4: シミュレーションで確認

プレビューパネルの「シミュレーション」タブで、データパックの動作を仮テストできます。
実際にサーバーに入れなくても、コマンドの実行結果を確認できます。

### STEP 5: ダウンロード

ツールバーの「ZIPダウンロード」ボタンをクリックすると、完成したデータパックがZIPファイルでダウンロードされます。

### STEP 6: Minecraftに導入

#### シングルプレイの場合

1. ダウンロードしたZIPファイルを**解凍せずにそのまま**使います
2. Minecraftを起動 → ワールド選択 → **「編集」** → **「データパック」**
3. **「パックフォルダーを開く」** をクリック
4. ZIPファイルをフォルダにコピー
5. ゲーム画面に戻り、**「完了」** をクリック
6. チャットで `/reload` を実行

#### マルチプレイサーバーの場合

1. サーバーの `world/datapacks/` フォルダにZIPファイルを配置
2. サーバーコンソールまたはゲーム内で `/reload` を実行

#### 確認コマンド

```
/datapack list                    # 有効なデータパック一覧
/datapack enable "file/パック名"   # データパックを有効化
/reload                           # データパック再読み込み
/function namespace:関数名         # 関数を手動実行
```

---

## 機能一覧

### コアエディタ機能

| 機能 | 説明 |
|------|------|
| **オートコンプリート** | コマンド・サブコマンド・アイテムID・エンティティ・エフェクト等を自動補完 |
| **execute run 対応** | `execute as @a run give @s ` でアイテムID補完が動作 |
| **シンタックスハイライト** | コマンド・セレクター・文字列・数値を色分け表示 |
| **リアルタイムエラー検出** | 不明なコマンド、スペルミス、構文エラー、バージョン互換性を検出 |
| **行番号 & エラーマーカー** | エラー行にアイコン表示、クリックでジャンプ |
| **コマンドリファレンス** | サイドバーにコマンドスニペット一覧を表示 |
| **コマンドビルダー** | 22種類のコマンドをGUIで組み立て |

### 補完対応データ

| カテゴリ | 件数 |
|----------|------|
| コマンド | 40+ (1.21.11対応) |
| アイテムID | 300+ |
| エンティティID | 80+ |
| エフェクトID | 40+ |
| エンチャントID | 30+ |
| パーティクル | 40+ |
| サウンド | 30+ |
| 属性（attribute） | 30+ |
| ゲームルール | 30+ |
| バイオーム | 50+ |

### バリデーション

- 不明なコマンドの検出（typo検出＆「もしかして」提案）
- execute run 後のコマンド検証
- scoreboard / effect のサブコマンド検証
- アイテムID / エンティティID / エフェクトID の存在チェック
- バージョン別コマンド利用可能チェック（削除・追加対応）
- 全角スペース検出
- 先頭スラッシュ警告
- 括弧の対応チェック
- 座標混在エラー（~と^の混在）

---

## 対応バージョン

| バージョン | pack_format | 主な特徴 |
|-----------|-------------|----------|
| **1.21.11** | 94 | stopwatch コマンド、fireSpreadRadius ゲームルール |
| **1.21.10** | 88 | dialog コマンド（NPCダイアログ） |
| **1.21.5** | 71 | test コマンド、SNBTテキスト形式 |
| **1.21.2** | 57 | rotate コマンド、属性名snake_case化 |
| **1.21** | 48 | 新属性（burning_time, mining_efficiency等） |
| **1.20.5** | 41 | アイテムコンポーネント形式（NBT廃止） |
| **1.20.3** | 26 | tick コマンド |
| **1.20.2** | 18 | random コマンド、関数マクロ（$変数） |
| **1.20** | 15 | return コマンド |
| **1.19.4** | 12 | ride / damage コマンド、execute on/summon |
| **1.19** | 10 | place コマンド、execute if biome |
| **1.17** | 7 | item コマンド（replaceitem後継） |
| **1.16** | 6 | attribute コマンド |
| **1.15** | 5 | predicate、execute if data |
| **1.14** | 4 | schedule / loot / forceload |
| **1.13** | 4 | データパック初対応 |

---

## ミニゲーム・システム一覧

### ミニゲーム（10種類）

| 名前 | 説明 |
|------|------|
| **鬼ごっこ** | 鬼チームが逃走者を追いかけて倒すゲーム |
| **PvPアリーナ** | チーム対抗の戦闘ゲーム（目標キル数達成） |
| **スプリーフ** | 足元のブロックを壊して相手を落とすゲーム |
| **レース / パルクール** | スタートからゴールまでの速さを競う |
| **宝探し** | 制限時間内にアイテムを集めるゲーム |
| **陣取り** | 指定エリアを制圧してポイント獲得 |
| **ゾンビサバイバル** | 押し寄せるゾンビから生き残る（ウェーブ制） |
| **建築バトル** | 制限時間内にお題に沿った建築をする |
| **旗取り (CTF)** | チーム対抗で相手チームの旗を奪うゲーム |
| **TNTラン** | 走った場所のブロックが消えるゲーム |

### システム部品（7種類）

| 名前 | 説明 |
|------|------|
| **カスタム武器** | 特殊能力付きの武器を生成 |
| **ショップNPC** | 村人ベースのショップシステム |
| **テレポートシステム** | ワープポイント間の移動システム |
| **ルートボックス** | ランダムアイテム排出（ガチャ） |
| **レシピセット** | カスタムクラフトレシピ一式 |
| **ボス戦** | カスタムボスエンティティ |
| **ロビーシステム** | ゲーム選択・待機ロビー |

---

## エディタ

### 統合 mcfunction エディタ

`.mcfunction` ファイル専用のエディタで、左側にコードエディタ、右側にサイドバーを配置。

**サイドバータブ:**

| タブ | 内容 |
|------|------|
| **コマンド** | カテゴリ別コマンドスニペット（クリックで挿入） |
| **ビルダー** | コマンドをGUIで組み立て |
| **テンプレート** | ゲームループ・タイマー等のコードテンプレート |
| **検索** | ファイル内テキスト検索 |

### ビジュアルエディタ

| エディタ | 対象 | 特徴 |
|----------|------|------|
| **レシピ** | recipe/*.json | Minecraft風3x3クラフトグリッドで材料配置 |
| **ルートテーブル** | loot_table/*.json | 確率バーでドロップ率を視覚調整 |
| **進捗** | advancement/*.json | フォーム入力（表示名、アイコン、条件、報酬） |
| **リッチテキスト** | JSONテキスト | Minecraft装飾テキスト（色・太字・斜体等）をGUI編集 |

全てのビジュアルエディタは **ビジュアル / 分割 / コード** の3モードで表示を切り替えられます。

---

## AI機能

### 対応AIプロバイダ

| プロバイダ | モデル | 特徴 |
|-----------|--------|------|
| **Google Gemini** | Gemini 3 Flash / Flash Thinking / Pro | 高速・無料枠あり |
| **Anthropic Claude** | Claude Sonnet 4.5 / Haiku 4.5 | 高品質コード生成 |
| **OpenAI** | GPT-5.3 Codex | デスクトップ版対応予定 |

### AI機能の使い方

1. 設定パネルでAPIキーを入力（Gemini / Claude）
2. AIチャットパネルで自然言語で指示
3. AIがデータパックのコードを自動生成

**例:**
- 「鬼ごっこのタイマーを30秒に変更して」
- 「スコアボードで勝利数を表示する関数を作って」
- 「TNTランの足元破壊範囲を広げて」

### エージェント実行

AIが自動的にファイルの作成・編集・削除を行う機能です。
チャット入力欄の横にある「エージェント」トグルで有効化できます。

---

## ガイド

アプリ内に14ページの初心者向けガイドを内蔵しています。

| ページ | 内容 |
|--------|------|
| データパックとは？ | データパックの基本知識と仕組み |
| プロジェクト作成 | セットアップウィザードの使い方 |
| ミニゲーム / システム作成 | ウィザードでの自動生成 |
| 統合エディタで編集 | VS Code風エディタの操作方法 |
| ビジュアルエディタ | JSONファイルの視覚編集 |
| コマンドビルダータブ | コマンド組み立てパネルの使い方 |
| ダウンロード & 使い方 | ZIPダウンロードとMinecraft導入 |
| 導入方法（シングルプレイ） | Windowsでのファイル配置手順 |
| 導入方法（マルチプレイ） | サーバーでのデータパック導入 |
| データパック管理コマンド | ゲーム内コマンド一覧 |
| データパックの構造 | フォルダとファイルの役割 |
| よくあるトラブル & 解決法 | エラー対処法 |
| ヒント & 次のステップ | スキルアップのためのヒント |

---

## 開発者向け

### 必要環境

- **Node.js** 20 以上
- **npm**

### ローカル開発

```bash
# リポジトリをクローン
git clone https://github.com/takubon0202/if-datapack.git
cd if-datapack

# 依存パッケージをインストール
npm install

# 開発サーバーを起動（http://localhost:3000）
npm run dev
```

### ビルド

```bash
# 本番用ビルド（dist/ に出力）
npm run build

# ビルド結果をプレビュー
npm run preview
```

### デプロイ

GitHub Actionsで自動デプロイが設定されています。
`main` ブランチにプッシュすると、自動的にビルドされ GitHub Pages にデプロイされます。

### プロジェクト構成

```
if-minecraft-craft/
├── src/
│   └── App.jsx          # メインアプリケーション（全コンポーネント）
├── index.html           # エントリポイント
├── vite.config.js       # Vite設定（base: /if-datapack/）
├── package.json         # 依存パッケージ
├── dist/                # ビルド出力
└── .github/
    └── workflows/
        └── deploy.yml   # GitHub Pages 自動デプロイ
```

> **Note:** 全てのコンポーネント・ロジック・データは `src/App.jsx` 1ファイルに集約されています（11,000行以上）。

---

## 技術スタック

| 技術 | 用途 |
|------|------|
| [React](https://react.dev/) 18 | UIフレームワーク |
| [Vite](https://vitejs.dev/) 6 | ビルドツール |
| [Tailwind CSS](https://tailwindcss.com/) (CDN) | スタイリング |
| [Lucide React](https://lucide.dev/) | アイコン |
| [JSZip](https://stuk.github.io/jszip/) | ZIPファイル生成 |
| [JetBrains Mono](https://www.jetbrains.com/mono/) | コードフォント |
| [Noto Sans JP](https://fonts.google.com/noto/specimen/Noto+Sans+JP) | 日本語フォント |

---

## ライセンス

MIT License

---

**制作:** if(塾)
